<form (ngSubmit)="onRegister()" [formGroup]="newEmpForm">
    <label for="firstname">{{'EMPLOYEE.FIRSTNAME'|translate}}:
        <input type="text" id="firstname" formControlName="firstname" required>
    </label><br><br>
    @if(firstname?.invalid && (firstname?.dirty || firstname?.touched)){
        @if(firstname?.hasError('required')){
            <p>{{'ERROR.FIRSTNAME.REQUIRED'|translate}}</p>
        }
        @if(firstname?.hasError('serverValidationError')){
            <p>{{'ERROR.FIRSTNAME.'+newEmpForm.get('firstname')?.errors?.['serverValidationError']|translate}}</p>
        }
    }
    
    <label for="lastname">{{'EMPLOYEE.LASTNAME'|translate}}:
        <input type="text" id="lastname"  formControlName="lastname" required>
    </label><br><br>
    @if(lastname?.invalid && (lastname?.dirty || lastname?.touched)){
        @if(lastname?.hasError('required')){
            <p>{{'ERROR.LASTNAME.REQUIRED'|translate}}</p>
        }
        @if(lastname?.hasError('serverValidationError')){
            <p>{{'ERROR.LASTNAME.'+newEmpForm.get('lastname')?.errors?.['serverValidationError']|translate}}</p>
        }
    }

    <label for="email">{{'EMPLOYEE.EMAIL'|translate}}:
        <input type="email" id="email" formControlName="email" required>
    </label><br><br>
    @if(email?.invalid && (email?.dirty || email?.touched)){
        @if(email?.hasError('required')){
            <p>{{'ERROR.EMAIL.REQUIRED'|translate}}</p>
        }
        @if(email?.hasError('pattern')){
            <p>{{'ERROR.EMAIL.PATTERN'|translate}}</p>
        }
         @if(email?.hasError('isUniqueEmail')){
            <p>{{'ERROR.EMAIL.UNIQUE'|translate}}</p>
        }
        @if(email?.hasError('serverValidationError')){
            <p>{{'ERROR.EMAIL.'+newEmpForm.get('email')?.errors?.['serverValidationError']|translate}}</p>
        } 
    }

    <label for="salary">{{'EMPLOYEE.SALARY'|translate}}:
        <input type="number" id="salary" formControlName="salary" required>
    </label><br><br>
    @if(salary?.invalid && (salary?.dirty || salary?.touched)){
        @if(salary?.hasError('required')){
            <p>{{'ERROR.SALARY.REQUIRED'|translate}}</p>
        }
        @if(salary?.hasError('min')){
            <p>{{ 'ERROR.SALARY.MIN'|translate:{min:minSalary} }}</p>
        }
        @if(salary?.hasError('serverValidationError')){
            <p>{{ 'ERROR.SALARY.'+newEmpForm.get('salary')?.errors?.['serverValidationError']|translate:{min:minSalary} }}</p>
        }
    }

    <div formArrayName="selectedLanguages">
        @for(selectedLanguage of selectedLanguages.controls; track selectedLanguage; let i=$index){
            <div [formGroupName]="i"> 
                <label>{{'EMPLOYEE.LANGUAGE'|translate}}: 
                     <select formControlName="language_name">
                        @for(language of availableLanguages(); track language){
                              @if(!isSelectedLanguage(language,i)){
                                <option [value]="language">{{language}}</option>
                            }  
                        }
                    </select><br><br> 
                    @if(selectedLanguage.get('language_name')?.invalid &&
                        (selectedLanguage.get('language_name')?.dirty || selectedLanguage.get('language_name')?.touched)
                        ){
                        @if(selectedLanguage.get('language_name')?.hasError('required')){
                            <p>{{'ERROR.LANGUAGE.LANGUAGE.REQUIRED'|translate}}</p>
                        }
                        @if(selectedLanguage.get('language_name')?.hasError('serverValidationError')){
                            <p>{{'ERROR.LANGUAGE.LANGUAGE.'+selectedLanguage.get('language_name')?.errors?.['serverValidationError']|translate}}</p>
                        }
                    }
                </label>

                <label for="level">{{'EMPLOYEE.LANGUAGE_LEVEL'|translate}}:
                    <select formControlName="language_level">
                         @for(languageLevel of languageLevels(); track languageLevel){
                                <option [value]="languageLevel">{{languageLevel}}</option>
                        }
                    </select><br><br>
                </label><br><br>

                @if(selectedLanguage.get('language_level')?.invalid &&
                    (selectedLanguage.get('language_level')?.dirty || selectedLanguage.get('language_level')?.touched)
                    ){
                    @if(selectedLanguage.get('language_level')?.hasError('required')){
                            <p>{{'ERROR.LANGUAGE.LANGUAGE_LEVEL.REQUIRED'|translate}}</p>
                    }
                    @if(selectedLanguage.get('language_level')?.hasError('serverValidationError')){
                        <p>{{'ERROR.LANGUAGE.LANGUAGE_LEVEL.'+selectedLanguage.get('language_level')?.errors?.['serverValidationError']|translate}}</p>
                    }
                }

                 

                @if(selectedLanguage?.hasError('duplicate')){
                    <p>{{'ERROR.LANGUAGE.LANGUAGE.DUPLICATE'|translate}}</p>
                }
            </div>
            @if(selectedLanguages.length>1 && i!==0){
                    <button type="button" (click)="removeSelectedLanguage(i)">{{'MANAGER.REMOVE_LANGUAGE'|translate}}</button>
            } 
        }
        

        @if(!isSelectedAll()){
            <button type="button" (click)="addSelectedLanguage()" [disabled]="!isValidLanguageForm()">{{'MANAGER.ADD_LANGUAGE'|translate}}</button>
        }

    </div>

    <button type="submit">{{'MANAGER.REGISTER'|translate}}</button>
    <a routerLink="/manager">{{'EMPLOYEE.MAIN'|translate}}</a>
</form>